<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.dao.PostTagDao">
  <!-- 게시물에 태그 달기 -->
  <insert id="insert" parameterType="PostTag">
    insert into post_tags ( post_id, tag_id )
    values ( #{postId}, #{tagId} )
  </insert>

  <!-- 게시물에 달린 태그 가져오기 -->
  <select id="selectTagByPostId" parameterType="Integer" resultType="Tag">
    select t.tag_id, t.tag_name
    from post_tags pt
    join tags t on pt.tag_id = t.tag_id
    where pt.post_id = #{postId}
    order by t.tag_id
  </select>

  <!-- 태그 삭제 -->
  <delete id="deleteTagByPostId" parameterType="PostTag">
    delete from post_tags
    where post_id = #{postId} and tag_id = #{tagId}
  </delete>

</mapper>
